# Generated by Django 4.2.26 on 2026-02-26 09:14

from decimal import Decimal
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name="Advance",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="المبلغ الإجمالي"
                    ),
                ),
                ("reason", models.TextField(verbose_name="السبب")),
                (
                    "installments_count",
                    models.IntegerField(
                        default=1,
                        help_text="عدد الأشهر التي سيتم خصم السلفة خلالها",
                        verbose_name="عدد الأقساط",
                    ),
                ),
                (
                    "installment_amount",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="يتم حسابها تلقائياً = المبلغ / عدد الأقساط",
                        max_digits=10,
                        verbose_name="قيمة القسط الشهري",
                    ),
                ),
                (
                    "remaining_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="المبلغ المتبقي",
                    ),
                ),
                (
                    "paid_installments",
                    models.IntegerField(default=0, verbose_name="عدد الأقساط المدفوعة"),
                ),
                (
                    "deduction_start_month",
                    models.DateField(
                        blank=True,
                        help_text="الشهر الذي سيبدأ فيه خصم الأقساط",
                        null=True,
                        verbose_name="شهر بدء الخصم",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "قيد الانتظار"),
                            ("approved", "معتمدة"),
                            ("rejected", "مرفوضة"),
                            ("paid", "مدفوعة"),
                            ("in_progress", "قيد الخصم"),
                            ("completed", "مكتملة"),
                            ("cancelled", "ملغاة"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "requested_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="تاريخ الطلب"),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                (
                    "payment_date",
                    models.DateField(blank=True, null=True, verbose_name="تاريخ الصرف"),
                ),
                (
                    "completed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الإكمال"
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
            ],
            options={
                "verbose_name": "سلفة",
                "verbose_name_plural": "السلف",
                "ordering": ["-requested_at"],
            },
        ),
        migrations.CreateModel(
            name="AdvanceInstallment",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("month", models.DateField(verbose_name="الشهر")),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="المبلغ المخصوم"
                    ),
                ),
                (
                    "installment_number",
                    models.IntegerField(
                        help_text="رقم القسط من إجمالي الأقساط",
                        verbose_name="رقم القسط",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="تاريخ الخصم"),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
            ],
            options={
                "verbose_name": "قسط سلفة",
                "verbose_name_plural": "أقساط السلف",
                "ordering": ["month"],
            },
        ),
        migrations.CreateModel(
            name="Attendance",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("date", models.DateField(verbose_name="التاريخ")),
                ("check_in", models.DateTimeField(verbose_name="وقت الحضور")),
                (
                    "check_out",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="وقت الانصراف"
                    ),
                ),
                (
                    "work_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="ساعات العمل",
                    ),
                ),
                (
                    "late_minutes",
                    models.IntegerField(default=0, verbose_name="دقائق التأخير"),
                ),
                (
                    "early_leave_minutes",
                    models.IntegerField(
                        default=0, verbose_name="دقائق الانصراف المبكر"
                    ),
                ),
                (
                    "overtime_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="ساعات العمل الإضافي",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("present", "حاضر"),
                            ("absent", "غائب"),
                            ("late", "متأخر"),
                            ("half_day", "نصف يوم"),
                            ("on_leave", "في إجازة"),
                        ],
                        default="present",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "حضور",
                "verbose_name_plural": "سجل الحضور",
                "ordering": ["-date"],
            },
        ),
        migrations.CreateModel(
            name="AttendanceSummary",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("month", models.DateField(verbose_name="الشهر")),
                (
                    "total_working_days",
                    models.IntegerField(
                        default=0,
                        help_text="عدد أيام العمل في الشهر (بدون الجمع والعطلات)",
                        verbose_name="إجمالي أيام العمل",
                    ),
                ),
                (
                    "present_days",
                    models.IntegerField(default=0, verbose_name="أيام الحضور"),
                ),
                (
                    "absent_days",
                    models.IntegerField(default=0, verbose_name="أيام الغياب"),
                ),
                (
                    "late_days",
                    models.IntegerField(default=0, verbose_name="أيام التأخير"),
                ),
                (
                    "half_days",
                    models.IntegerField(default=0, verbose_name="أيام نصف يوم"),
                ),
                (
                    "paid_leave_days",
                    models.IntegerField(
                        default=0, verbose_name="أيام الإجازات المدفوعة"
                    ),
                ),
                (
                    "unpaid_leave_days",
                    models.IntegerField(
                        default=0, verbose_name="أيام الإجازات غير المدفوعة"
                    ),
                ),
                (
                    "total_work_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="إجمالي ساعات العمل",
                    ),
                ),
                (
                    "total_late_minutes",
                    models.IntegerField(default=0, verbose_name="إجمالي دقائق التأخير"),
                ),
                (
                    "total_early_leave_minutes",
                    models.IntegerField(
                        default=0, verbose_name="إجمالي دقائق الانصراف المبكر"
                    ),
                ),
                (
                    "total_overtime_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="إجمالي ساعات العمل الإضافي",
                    ),
                ),
                (
                    "absence_deduction_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="مبلغ خصم الغياب",
                    ),
                ),
                (
                    "late_deduction_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="مبلغ خصم التأخير",
                    ),
                ),
                (
                    "overtime_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="مبلغ العمل الإضافي",
                    ),
                ),
                (
                    "is_calculated",
                    models.BooleanField(default=False, verbose_name="تم الحساب"),
                ),
                (
                    "is_approved",
                    models.BooleanField(default=False, verbose_name="معتمد"),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "calculation_details",
                    models.JSONField(
                        blank=True, null=True, verbose_name="تفاصيل الحساب"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, null=True)),
                ("updated_at", models.DateTimeField(auto_now=True, null=True)),
            ],
            options={
                "verbose_name": "ملخص حضور شهري",
                "verbose_name_plural": "ملخصات الحضور الشهرية",
                "ordering": ["-month", "employee"],
            },
        ),
        migrations.CreateModel(
            name="BiometricDevice",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "device_name",
                    models.CharField(max_length=100, verbose_name="اسم الجهاز"),
                ),
                (
                    "device_code",
                    models.CharField(
                        max_length=50, unique=True, verbose_name="كود الجهاز"
                    ),
                ),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("fingerprint", "بصمة الإصبع"),
                            ("face", "التعرف على الوجه"),
                            ("card", "كارت"),
                            ("mixed", "مختلط"),
                        ],
                        max_length=20,
                        verbose_name="نوع الجهاز",
                    ),
                ),
                (
                    "serial_number",
                    models.CharField(
                        max_length=100, unique=True, verbose_name="الرقم التسلسلي"
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(verbose_name="عنوان IP")),
                ("port", models.IntegerField(default=4370, verbose_name="المنفذ")),
                ("location", models.CharField(max_length=200, verbose_name="الموقع")),
                (
                    "timezone",
                    models.CharField(
                        default="Africa/Cairo",
                        max_length=50,
                        verbose_name="المنطقة الزمنية",
                    ),
                ),
                (
                    "auto_sync",
                    models.BooleanField(default=True, verbose_name="مزامنة تلقائية"),
                ),
                (
                    "sync_interval",
                    models.IntegerField(
                        default=30, verbose_name="فترة المزامنة (دقائق)"
                    ),
                ),
                (
                    "username",
                    models.CharField(
                        blank=True, max_length=50, verbose_name="اسم المستخدم"
                    ),
                ),
                (
                    "password",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="كلمة المرور"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "نشط"),
                            ("inactive", "غير نشط"),
                            ("maintenance", "تحت الصيانة"),
                            ("error", "خطأ"),
                        ],
                        default="active",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                (
                    "last_sync",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="آخر مزامنة"
                    ),
                ),
                (
                    "last_connection",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="آخر اتصال"
                    ),
                ),
                (
                    "total_users",
                    models.IntegerField(default=0, verbose_name="عدد المستخدمين"),
                ),
                (
                    "total_records",
                    models.IntegerField(default=0, verbose_name="عدد السجلات"),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإضافة"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "ماكينة بصمة",
                "verbose_name_plural": "ماكينات البصمة",
                "ordering": ["device_name"],
            },
        ),
        migrations.CreateModel(
            name="BiometricLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "user_id",
                    models.CharField(max_length=50, verbose_name="معرف المستخدم"),
                ),
                ("timestamp", models.DateTimeField(verbose_name="وقت البصمة")),
                (
                    "log_type",
                    models.CharField(
                        choices=[
                            ("check_in", "حضور"),
                            ("check_out", "انصراف"),
                            ("break_start", "بداية استراحة"),
                            ("break_end", "نهاية استراحة"),
                        ],
                        default="check_in",
                        max_length=20,
                        verbose_name="نوع السجل",
                    ),
                ),
                (
                    "is_processed",
                    models.BooleanField(default=False, verbose_name="تمت المعالجة"),
                ),
                (
                    "processed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="وقت المعالجة"
                    ),
                ),
                (
                    "raw_data",
                    models.JSONField(
                        blank=True, null=True, verbose_name="البيانات الخام"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "verbose_name": "سجل بصمة",
                "verbose_name_plural": "سجلات البصمات",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="BiometricSyncLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("started_at", models.DateTimeField(verbose_name="وقت البداية")),
                (
                    "completed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="وقت الانتهاء"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("success", "نجحت"),
                            ("failed", "فشلت"),
                            ("partial", "جزئية"),
                        ],
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "records_fetched",
                    models.IntegerField(default=0, verbose_name="السجلات المجلوبة"),
                ),
                (
                    "records_processed",
                    models.IntegerField(default=0, verbose_name="السجلات المعالجة"),
                ),
                (
                    "records_failed",
                    models.IntegerField(default=0, verbose_name="السجلات الفاشلة"),
                ),
                (
                    "error_message",
                    models.TextField(blank=True, verbose_name="رسالة الخطأ"),
                ),
            ],
            options={
                "verbose_name": "سجل مزامنة",
                "verbose_name_plural": "سجلات المزامنة",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="BiometricUserMapping",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "biometric_user_id",
                    models.CharField(
                        max_length=50,
                        unique=True,
                        verbose_name="معرف المستخدم في البصمة",
                    ),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "ربط معرف البصمة",
                "verbose_name_plural": "ربط معرفات البصمة",
            },
        ),
        migrations.CreateModel(
            name="Contract",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "contract_number",
                    models.CharField(
                        max_length=50, unique=True, verbose_name="رقم العقد"
                    ),
                ),
                (
                    "contract_type",
                    models.CharField(
                        choices=[
                            ("permanent", "دائم"),
                            ("temporary", "مؤقت"),
                            ("contract", "عقد محدد المدة"),
                            ("internship", "تدريب"),
                            ("part_time", "دوام جزئي"),
                        ],
                        max_length=20,
                        verbose_name="نوع العقد",
                    ),
                ),
                (
                    "biometric_user_id",
                    models.IntegerField(
                        blank=True,
                        help_text="رقم الموظف في جهاز البصمة (اختياري - سيتم حفظه في ملف الموظف)",
                        null=True,
                        verbose_name="رقم البصمة",
                    ),
                ),
                ("start_date", models.DateField(verbose_name="تاريخ البداية")),
                (
                    "end_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ النهاية"
                    ),
                ),
                (
                    "probation_period_months",
                    models.IntegerField(
                        blank=True,
                        default=3,
                        null=True,
                        verbose_name="فترة التجربة (بالأشهر)",
                    ),
                ),
                (
                    "probation_end_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ انتهاء التجربة"
                    ),
                ),
                (
                    "basic_salary",
                    models.DecimalField(
                        decimal_places=2,
                        max_digits=10,
                        validators=[
                            django.core.validators.MinValueValidator(
                                0,
                                message="الراتب الأساسي يجب أن يكون أكبر من أو يساوي صفر",
                            )
                        ],
                        verbose_name="الراتب الأساسي",
                    ),
                ),
                (
                    "has_annual_increase",
                    models.BooleanField(
                        default=False, verbose_name="يستحق زيادة سنوية"
                    ),
                ),
                (
                    "annual_increase_percentage",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="مثال: 10 تعني 10% سنوياً",
                        max_digits=5,
                        null=True,
                        verbose_name="نسبة الزيادة السنوية (%)",
                    ),
                ),
                (
                    "increase_frequency",
                    models.CharField(
                        choices=[
                            ("annual", "سنوي"),
                            ("semi_annual", "نصف سنوي"),
                            ("quarterly", "ربع سنوي"),
                            ("monthly", "شهري"),
                        ],
                        default="annual",
                        max_length=20,
                        verbose_name="تكرار الزيادة",
                    ),
                ),
                (
                    "increase_start_reference",
                    models.CharField(
                        choices=[
                            ("contract_date", "تاريخ العقد"),
                            ("january", "يناير"),
                            ("july", "يوليو"),
                        ],
                        default="contract_date",
                        max_length=20,
                        verbose_name="بداية احتساب الزيادة",
                    ),
                ),
                (
                    "next_increase_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ الزيادة القادمة"
                    ),
                ),
                (
                    "terms_and_conditions",
                    models.TextField(blank=True, verbose_name="البنود والشروط"),
                ),
                (
                    "special_clauses",
                    models.TextField(blank=True, verbose_name="بنود خاصة"),
                ),
                (
                    "contract_file",
                    models.FileField(
                        blank=True,
                        null=True,
                        upload_to="contracts/%Y/%m/",
                        validators=[
                            django.core.validators.FileExtensionValidator(
                                ["pdf", "doc", "docx"]
                            )
                        ],
                        verbose_name="ملف العقد",
                    ),
                ),
                (
                    "auto_renew",
                    models.BooleanField(default=False, verbose_name="تجديد تلقائي"),
                ),
                (
                    "renewal_notice_days",
                    models.IntegerField(
                        blank=True,
                        default=30,
                        null=True,
                        verbose_name="أيام الإشعار قبل التجديد",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "مسودة"),
                            ("active", "ساري"),
                            ("suspended", "موقوف"),
                            ("expired", "منتهي"),
                            ("terminated", "منهي"),
                        ],
                        default="draft",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
                (
                    "signed_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ التوقيع"
                    ),
                ),
            ],
            options={
                "verbose_name": "عقد",
                "verbose_name_plural": "العقود",
                "ordering": ["-start_date"],
                "permissions": [
                    ("can_manage_contracts", "إدارة العقود"),
                    ("can_sign_contracts", "توقيع العقود"),
                    ("can_terminate_contracts", "إنهاء العقود"),
                ],
            },
        ),
        migrations.CreateModel(
            name="ContractAmendment",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "amendment_number",
                    models.CharField(
                        max_length=50, unique=True, verbose_name="رقم التعديل"
                    ),
                ),
                (
                    "amendment_type",
                    models.CharField(
                        choices=[
                            ("salary_increase", "زيادة راتب"),
                            ("salary_deduction", "استقطاع"),
                            ("position_change", "تغيير منصب"),
                            ("extension", "تمديد"),
                            ("other", "أخرى"),
                        ],
                        max_length=20,
                        verbose_name="نوع التعديل",
                    ),
                ),
                ("effective_date", models.DateField(verbose_name="تاريخ السريان")),
                ("description", models.TextField(verbose_name="الوصف")),
                (
                    "field_name",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="اسم الحقل"
                    ),
                ),
                (
                    "old_value",
                    models.TextField(blank=True, verbose_name="القيمة القديمة"),
                ),
                (
                    "new_value",
                    models.TextField(blank=True, verbose_name="القيمة الجديدة"),
                ),
                (
                    "is_automatic",
                    models.BooleanField(default=False, verbose_name="تلقائي"),
                ),
                (
                    "amendment_file",
                    models.FileField(
                        blank=True,
                        null=True,
                        upload_to="contract_amendments/%Y/%m/",
                        validators=[
                            django.core.validators.FileExtensionValidator(
                                ["pdf", "doc", "docx"]
                            )
                        ],
                        verbose_name="ملف التعديل",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "verbose_name": "تعديل عقد",
                "verbose_name_plural": "تعديلات العقود",
                "ordering": ["-effective_date"],
            },
        ),
        migrations.CreateModel(
            name="ContractDocument",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "document_type",
                    models.CharField(
                        choices=[
                            ("signed_contract", "العقد الموقع"),
                            ("id_copy", "صورة الهوية"),
                            ("certificate", "الشهادات"),
                            ("medical_report", "التقرير الطبي"),
                            ("bank_account", "بيانات الحساب البنكي"),
                            ("other", "أخرى"),
                        ],
                        max_length=50,
                        verbose_name="نوع الوثيقة",
                    ),
                ),
                ("title", models.CharField(max_length=200, verbose_name="العنوان")),
                (
                    "file",
                    models.FileField(
                        upload_to="contract_documents/%Y/%m/",
                        validators=[
                            django.core.validators.FileExtensionValidator(
                                ["pdf", "doc", "docx", "jpg", "jpeg", "png"]
                            )
                        ],
                        verbose_name="الملف",
                    ),
                ),
                ("description", models.TextField(blank=True, verbose_name="الوصف")),
                (
                    "uploaded_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="تاريخ الرفع"),
                ),
            ],
            options={
                "verbose_name": "وثيقة عقد",
                "verbose_name_plural": "وثائق العقود",
                "ordering": ["-uploaded_at"],
            },
        ),
        migrations.CreateModel(
            name="ContractIncrease",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "increase_number",
                    models.IntegerField(
                        help_text="الترتيب التسلسلي للزيادة (1، 2، 3...)",
                        verbose_name="رقم الزيادة",
                    ),
                ),
                (
                    "increase_type",
                    models.CharField(
                        choices=[("percentage", "نسبة مئوية"), ("fixed", "مبلغ ثابت")],
                        default="percentage",
                        max_length=20,
                        verbose_name="نوع الزيادة",
                    ),
                ),
                (
                    "increase_percentage",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="مثال: 7.5 للزيادة 7.5%",
                        max_digits=5,
                        null=True,
                        verbose_name="نسبة الزيادة (%)",
                    ),
                ),
                (
                    "increase_amount",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        max_digits=10,
                        null=True,
                        verbose_name="مبلغ الزيادة الثابت",
                    ),
                ),
                (
                    "months_from_start",
                    models.IntegerField(
                        help_text="مثال: 6 للزيادة بعد 6 أشهر من بداية العقد",
                        verbose_name="عدد الأشهر من بداية العقد",
                    ),
                ),
                (
                    "scheduled_date",
                    models.DateField(
                        help_text="التاريخ المتوقع لتطبيق الزيادة",
                        verbose_name="التاريخ المجدول",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "قيد الانتظار"),
                            ("applied", "تم التطبيق"),
                            ("cancelled", "ملغي"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "applied_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ التطبيق الفعلي"
                    ),
                ),
                (
                    "applied_amount",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="المبلغ الفعلي الذي تم إضافته للراتب",
                        max_digits=10,
                        null=True,
                        verbose_name="المبلغ المطبق",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "زيادة مجدولة",
                "verbose_name_plural": "الزيادات المجدولة",
                "ordering": ["contract", "increase_number"],
            },
        ),
        migrations.CreateModel(
            name="ContractSalaryComponent",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        help_text="مثل: BASIC, HOUSING, TRANSPORT",
                        max_length=50,
                        verbose_name="الكود",
                    ),
                ),
                ("name", models.CharField(max_length=100, verbose_name="اسم البند")),
                (
                    "component_type",
                    models.CharField(
                        choices=[("earning", "مستحق"), ("deduction", "مستقطع")],
                        max_length=20,
                        verbose_name="نوع البند",
                    ),
                ),
                (
                    "calculation_method",
                    models.CharField(
                        choices=[("fixed", "ثابت"), ("formula", "صيغة حسابية")],
                        default="fixed",
                        max_length=20,
                        verbose_name="طريقة الحساب",
                    ),
                ),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        validators=[
                            django.core.validators.MinValueValidator(Decimal("0.00"))
                        ],
                        verbose_name="المبلغ الثابت",
                    ),
                ),
                (
                    "percentage",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="من الراتب الأساسي",
                        max_digits=5,
                        null=True,
                        verbose_name="النسبة المئوية",
                    ),
                ),
                (
                    "formula",
                    models.CharField(
                        blank=True,
                        help_text="مثال: BASIC * 0.1 + 500",
                        max_length=255,
                        verbose_name="الصيغة الحسابية",
                    ),
                ),
                (
                    "is_basic",
                    models.BooleanField(
                        default=False,
                        help_text="هل هذا هو الراتب الأساسي؟",
                        verbose_name="راتب أساسي",
                    ),
                ),
                (
                    "is_taxable",
                    models.BooleanField(default=True, verbose_name="خاضع للضريبة"),
                ),
                (
                    "is_fixed",
                    models.BooleanField(default=True, verbose_name="ثابت شهرياً"),
                ),
                (
                    "affects_overtime",
                    models.BooleanField(
                        default=False, verbose_name="يؤثر على حساب الإضافي"
                    ),
                ),
                ("order", models.IntegerField(default=0, verbose_name="الترتيب")),
                (
                    "show_in_payslip",
                    models.BooleanField(
                        default=True, verbose_name="يظهر في قسيمة الراتب"
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإضافة"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "بند راتب العقد",
                "verbose_name_plural": "بنود رواتب العقود",
                "ordering": ["component_type", "order", "id"],
            },
        ),
        migrations.CreateModel(
            name="Department",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        max_length=20, unique=True, verbose_name="كود القسم"
                    ),
                ),
                (
                    "name_ar",
                    models.CharField(max_length=200, verbose_name="اسم القسم (عربي)"),
                ),
                (
                    "name_en",
                    models.CharField(
                        blank=True, max_length=200, verbose_name="اسم القسم (إنجليزي)"
                    ),
                ),
                ("description", models.TextField(blank=True, verbose_name="الوصف")),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "قسم",
                "verbose_name_plural": "الأقسام",
                "ordering": ["code"],
            },
        ),
        migrations.CreateModel(
            name="Employee",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "employee_number",
                    models.CharField(
                        max_length=20, unique=True, verbose_name="رقم الموظف"
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        max_length=200,
                        validators=[
                            django.core.validators.MinLengthValidator(
                                5, message="الاسم يجب أن يكون 5 أحرف على الأقل"
                            )
                        ],
                        verbose_name="اسم الموظف",
                    ),
                ),
                (
                    "national_id",
                    models.CharField(
                        max_length=14,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="الرقم القومي يجب أن يكون 14 رقم",
                                regex="^\\d{14}$",
                            )
                        ],
                        verbose_name="الرقم القومي",
                    ),
                ),
                ("birth_date", models.DateField(verbose_name="تاريخ الميلاد")),
                (
                    "gender",
                    models.CharField(
                        choices=[("male", "ذكر"), ("female", "أنثى")],
                        max_length=10,
                        verbose_name="الجنس",
                    ),
                ),
                (
                    "marital_status",
                    models.CharField(
                        choices=[
                            ("single", "أعزب"),
                            ("married", "متزوج"),
                            ("divorced", "مطلق"),
                            ("widowed", "أرمل"),
                        ],
                        max_length=20,
                        verbose_name="الحالة الاجتماعية",
                    ),
                ),
                (
                    "military_status",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("completed", "أدى الخدمة"),
                            ("exempted", "معفى"),
                            ("postponed", "مؤجل"),
                            ("not_applicable", "لا ينطبق"),
                        ],
                        max_length=20,
                        verbose_name="الموقف من التجنيد",
                    ),
                ),
                (
                    "personal_email",
                    models.EmailField(
                        blank=True,
                        max_length=254,
                        null=True,
                        verbose_name="البريد الشخصي",
                    ),
                ),
                (
                    "work_email",
                    models.EmailField(
                        blank=True,
                        max_length=254,
                        null=True,
                        verbose_name="البريد الوظيفي",
                    ),
                ),
                (
                    "mobile_phone",
                    models.CharField(
                        blank=True,
                        max_length=15,
                        null=True,
                        verbose_name="الهاتف المحمول",
                    ),
                ),
                (
                    "home_phone",
                    models.CharField(
                        blank=True, max_length=15, null=True, verbose_name="هاتف المنزل"
                    ),
                ),
                (
                    "address",
                    models.TextField(blank=True, null=True, verbose_name="العنوان"),
                ),
                (
                    "city",
                    models.CharField(
                        blank=True, max_length=100, null=True, verbose_name="المدينة"
                    ),
                ),
                (
                    "postal_code",
                    models.CharField(
                        blank=True,
                        max_length=10,
                        null=True,
                        verbose_name="الرمز البريدي",
                    ),
                ),
                (
                    "emergency_contact_name",
                    models.CharField(
                        blank=True,
                        max_length=200,
                        verbose_name="اسم جهة الاتصال للطوارئ",
                    ),
                ),
                (
                    "emergency_contact_relation",
                    models.CharField(
                        blank=True, max_length=50, verbose_name="صلة القرابة"
                    ),
                ),
                (
                    "emergency_contact_phone",
                    models.CharField(
                        blank=True, max_length=15, verbose_name="هاتف الطوارئ"
                    ),
                ),
                (
                    "biometric_user_id",
                    models.CharField(
                        blank=True,
                        help_text="رقم تعريف الموظف في نظام البصمة",
                        max_length=50,
                        null=True,
                        verbose_name="رقم الموظف في جهاز البصمة",
                    ),
                ),
                ("hire_date", models.DateField(verbose_name="تاريخ التعيين")),
                (
                    "employment_type",
                    models.CharField(
                        choices=[
                            ("full_time", "دوام كامل"),
                            ("part_time", "دوام جزئي"),
                            ("contract", "عقد"),
                            ("temporary", "مؤقت"),
                        ],
                        default="full_time",
                        max_length=20,
                        verbose_name="نوع التوظيف",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "نشط"),
                            ("on_leave", "في إجازة"),
                            ("suspended", "موقوف"),
                            ("terminated", "منتهي الخدمة"),
                        ],
                        default="active",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "termination_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ إنهاء الخدمة"
                    ),
                ),
                (
                    "termination_reason",
                    models.TextField(blank=True, verbose_name="سبب إنهاء الخدمة"),
                ),
                (
                    "photo",
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to="hr/employees/photos/",
                        verbose_name="الصورة الشخصية",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "موظف",
                "verbose_name_plural": "الموظفين",
                "ordering": ["employee_number"],
                "permissions": [
                    ("can_manage_employees", "إدارة الموظفين"),
                    ("can_view_all_employees", "عرض جميع الموظفين"),
                    ("can_terminate_employees", "إنهاء خدمة الموظفين"),
                ],
            },
        ),
        migrations.CreateModel(
            name="EndOfServiceBenefit",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "calculation_date",
                    models.DateField(auto_now_add=True, verbose_name="تاريخ الحساب"),
                ),
                (
                    "termination_date",
                    models.DateField(verbose_name="تاريخ انتهاء الخدمة"),
                ),
                (
                    "service_years",
                    models.DecimalField(
                        decimal_places=2, max_digits=5, verbose_name="سنوات الخدمة"
                    ),
                ),
                ("service_months", models.IntegerField(verbose_name="أشهر الخدمة")),
                (
                    "last_salary",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="آخر راتب"
                    ),
                ),
                (
                    "benefit_amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="مبلغ المكافأة"
                    ),
                ),
                (
                    "calculation_method",
                    models.CharField(
                        choices=[
                            ("full_service", "خدمة كاملة"),
                            ("resignation", "استقالة"),
                            ("termination", "إنهاء خدمة"),
                        ],
                        max_length=50,
                        verbose_name="طريقة الحساب",
                    ),
                ),
                (
                    "calculation_details",
                    models.TextField(
                        blank=True,
                        help_text="شرح تفصيلي لكيفية حساب المكافأة",
                        verbose_name="تفاصيل الحساب",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("calculated", "محسوب"),
                            ("approved", "معتمد"),
                            ("paid", "مدفوع"),
                            ("cancelled", "ملغي"),
                        ],
                        default="calculated",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                (
                    "paid_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الدفع"
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "مكافأة نهاية الخدمة",
                "verbose_name_plural": "مكافآت نهاية الخدمة",
                "db_table": "hr_end_of_service_benefit",
                "ordering": ["-calculation_date"],
            },
        ),
        migrations.CreateModel(
            name="JobTitle",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        max_length=20, unique=True, verbose_name="كود الوظيفة"
                    ),
                ),
                (
                    "title_ar",
                    models.CharField(max_length=200, verbose_name="المسمى (عربي)"),
                ),
                (
                    "title_en",
                    models.CharField(
                        blank=True, max_length=200, verbose_name="المسمى (إنجليزي)"
                    ),
                ),
                ("description", models.TextField(blank=True, verbose_name="الوصف")),
                (
                    "responsibilities",
                    models.TextField(blank=True, verbose_name="المسؤوليات"),
                ),
                (
                    "requirements",
                    models.TextField(blank=True, verbose_name="المتطلبات"),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "مسمى وظيفي",
                "verbose_name_plural": "المسميات الوظيفية",
                "ordering": ["code"],
            },
        ),
        migrations.CreateModel(
            name="Leave",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("start_date", models.DateField(verbose_name="تاريخ البداية")),
                ("end_date", models.DateField(verbose_name="تاريخ النهاية")),
                ("days_count", models.IntegerField(verbose_name="عدد الأيام")),
                ("reason", models.TextField(verbose_name="السبب")),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "قيد الانتظار"),
                            ("approved", "معتمدة"),
                            ("rejected", "مرفوضة"),
                            ("cancelled", "ملغاة"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "requested_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="تاريخ الطلب"),
                ),
                (
                    "reviewed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ المراجعة"
                    ),
                ),
                (
                    "review_notes",
                    models.TextField(blank=True, verbose_name="ملاحظات المراجعة"),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                (
                    "attachment",
                    models.FileField(
                        blank=True,
                        null=True,
                        upload_to="hr/leaves/attachments/",
                        verbose_name="المرفق",
                    ),
                ),
            ],
            options={
                "verbose_name": "إجازة",
                "verbose_name_plural": "الإجازات",
                "ordering": ["-requested_at"],
                "permissions": [
                    ("can_approve_leaves", "اعتماد الإجازات"),
                    ("can_reject_leaves", "رفض الإجازات"),
                    ("can_view_all_leaves", "عرض جميع الإجازات"),
                ],
            },
        ),
        migrations.CreateModel(
            name="LeaveBalance",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("year", models.IntegerField(verbose_name="السنة")),
                ("total_days", models.IntegerField(verbose_name="إجمالي الأيام")),
                (
                    "accrued_days",
                    models.IntegerField(default=0, verbose_name="الأيام المستحقة"),
                ),
                (
                    "used_days",
                    models.IntegerField(default=0, verbose_name="الأيام المستخدمة"),
                ),
                ("remaining_days", models.IntegerField(verbose_name="الأيام المتبقية")),
                (
                    "accrual_start_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="تاريخ بداية الاستحقاق"
                    ),
                ),
                (
                    "last_accrual_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="آخر تاريخ استحقاق"
                    ),
                ),
            ],
            options={
                "verbose_name": "رصيد إجازة",
                "verbose_name_plural": "أرصدة الإجازات",
            },
        ),
        migrations.CreateModel(
            name="LeaveSummary",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("month", models.DateField(verbose_name="الشهر")),
                (
                    "annual_leave_days",
                    models.IntegerField(default=0, verbose_name="إجازات سنوية"),
                ),
                (
                    "sick_leave_days",
                    models.IntegerField(default=0, verbose_name="إجازات مرضية"),
                ),
                (
                    "emergency_leave_days",
                    models.IntegerField(default=0, verbose_name="إجازات طارئة"),
                ),
                (
                    "unpaid_leave_days",
                    models.IntegerField(default=0, verbose_name="إجازات بدون راتب"),
                ),
                (
                    "total_paid_days",
                    models.IntegerField(
                        default=0, verbose_name="إجمالي الأيام المدفوعة"
                    ),
                ),
                (
                    "total_unpaid_days",
                    models.IntegerField(
                        default=0, verbose_name="إجمالي الأيام غير المدفوعة"
                    ),
                ),
                (
                    "deduction_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="مبلغ الخصم",
                    ),
                ),
                (
                    "is_calculated",
                    models.BooleanField(default=False, verbose_name="تم الحساب"),
                ),
                (
                    "details",
                    models.JSONField(
                        blank=True,
                        help_text="تفاصيل كل إجازة",
                        null=True,
                        verbose_name="التفاصيل",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                ("created_at", models.DateTimeField(auto_now_add=True, null=True)),
                ("updated_at", models.DateTimeField(auto_now=True, null=True)),
            ],
            options={
                "verbose_name": "ملخص إجازات شهري",
                "verbose_name_plural": "ملخصات الإجازات الشهرية",
                "ordering": ["-month", "employee"],
            },
        ),
        migrations.CreateModel(
            name="LeaveType",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name_ar",
                    models.CharField(max_length=100, verbose_name="اسم النوع (عربي)"),
                ),
                (
                    "name_en",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="اسم النوع (إنجليزي)"
                    ),
                ),
                (
                    "code",
                    models.CharField(max_length=20, unique=True, verbose_name="الكود"),
                ),
                (
                    "max_days_per_year",
                    models.IntegerField(verbose_name="الحد الأقصى في السنة"),
                ),
                ("is_paid", models.BooleanField(default=True, verbose_name="مدفوعة")),
                (
                    "requires_approval",
                    models.BooleanField(default=True, verbose_name="تحتاج موافقة"),
                ),
                (
                    "requires_document",
                    models.BooleanField(default=False, verbose_name="تحتاج مستند"),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
            ],
            options={
                "verbose_name": "نوع إجازة",
                "verbose_name_plural": "أنواع الإجازات",
            },
        ),
        migrations.CreateModel(
            name="Payroll",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("month", models.DateField(verbose_name="الشهر")),
                (
                    "basic_salary",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="الراتب الأساسي"
                    ),
                ),
                (
                    "allowances",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="البدلات",
                    ),
                ),
                (
                    "overtime_hours",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="ساعات العمل الإضافي",
                    ),
                ),
                (
                    "overtime_rate",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="سعر ساعة العمل الإضافي",
                    ),
                ),
                (
                    "overtime_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="قيمة العمل الإضافي",
                    ),
                ),
                (
                    "bonus",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="المكافآت",
                    ),
                ),
                (
                    "social_insurance",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="التأمينات الاجتماعية",
                    ),
                ),
                (
                    "tax",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="الضرائب",
                    ),
                ),
                (
                    "absence_days",
                    models.IntegerField(default=0, verbose_name="أيام الغياب"),
                ),
                (
                    "absence_deduction",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="خصم الغياب",
                    ),
                ),
                (
                    "late_deduction",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="خصم التأخير",
                    ),
                ),
                (
                    "advance_deduction",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="خصم السلف",
                    ),
                ),
                (
                    "other_deductions",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="خصومات أخرى",
                    ),
                ),
                (
                    "gross_salary",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="إجمالي الراتب"
                    ),
                ),
                (
                    "total_additions",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="إجمالي الإضافات",
                    ),
                ),
                (
                    "total_deductions",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        verbose_name="إجمالي الخصومات",
                    ),
                ),
                (
                    "net_salary",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="صافي الراتب"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "مسودة"),
                            ("calculated", "محسوب"),
                            ("approved", "معتمد"),
                            ("paid", "مدفوع"),
                            ("cancelled", "ملغي"),
                        ],
                        default="draft",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "payment_method",
                    models.CharField(
                        blank=True,
                        help_text="كود الحساب المالي (خزينة أو بنك)",
                        max_length=50,
                        verbose_name="طريقة الدفع",
                    ),
                ),
                (
                    "payment_date",
                    models.DateField(blank=True, null=True, verbose_name="تاريخ الدفع"),
                ),
                (
                    "payment_reference",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="مرجع الدفع"
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "processed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ المعالجة"
                    ),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                (
                    "paid_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الدفع الفعلي"
                    ),
                ),
            ],
            options={
                "verbose_name": "قسيمة راتب",
                "verbose_name_plural": "قسائم الرواتب",
                "ordering": ["-month", "employee"],
                "permissions": [
                    ("can_process_payroll", "معالجة الرواتب"),
                    ("can_approve_payroll", "اعتماد الرواتب"),
                    ("can_pay_payroll", "دفع الرواتب"),
                    ("can_view_all_salaries", "عرض جميع الرواتب"),
                ],
            },
        ),
        migrations.CreateModel(
            name="PayrollLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "code",
                    models.CharField(default="", max_length=50, verbose_name="الكود"),
                ),
                (
                    "name",
                    models.CharField(
                        default="", max_length=200, verbose_name="اسم البند"
                    ),
                ),
                (
                    "component_type",
                    models.CharField(
                        choices=[("earning", "مستحق"), ("deduction", "خصم")],
                        default="earning",
                        max_length=20,
                        verbose_name="النوع",
                    ),
                ),
                (
                    "source",
                    models.CharField(
                        choices=[
                            ("contract", "من العقد"),
                            ("attendance", "من الحضور"),
                            ("leave", "من الإجازات"),
                            ("overtime", "عمل إضافي"),
                            ("advance", "سلفة"),
                            ("bonus", "مكافأة"),
                            ("deduction", "خصم"),
                            ("adjustment", "تعديل"),
                        ],
                        default="contract",
                        max_length=20,
                        verbose_name="المصدر",
                    ),
                ),
                (
                    "quantity",
                    models.DecimalField(
                        decimal_places=2,
                        default=1,
                        help_text="مثال: عدد الأيام، الساعات، إلخ",
                        max_digits=10,
                        verbose_name="الكمية",
                    ),
                ),
                (
                    "rate",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="سعر الوحدة",
                        max_digits=10,
                        verbose_name="السعر",
                    ),
                ),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="quantity × rate",
                        max_digits=10,
                        verbose_name="المبلغ",
                    ),
                ),
                ("description", models.TextField(blank=True, verbose_name="الوصف")),
                (
                    "calculation_details",
                    models.JSONField(
                        blank=True,
                        help_text="تخزين تفاصيل الحساب بصيغة JSON",
                        null=True,
                        verbose_name="تفاصيل الحساب",
                    ),
                ),
                ("order", models.IntegerField(default=0, verbose_name="الترتيب")),
                ("created_at", models.DateTimeField(auto_now_add=True, null=True)),
            ],
            options={
                "verbose_name": "بند قسيمة راتب",
                "verbose_name_plural": "بنود قسائم الرواتب",
                "ordering": ["payroll", "component_type", "order"],
            },
        ),
        migrations.CreateModel(
            name="PayrollPayment",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "payment_reference",
                    models.CharField(
                        help_text="رقم مرجعي فريد للدفعة",
                        max_length=50,
                        unique=True,
                        verbose_name="مرجع الدفعة",
                    ),
                ),
                (
                    "payment_type",
                    models.CharField(
                        choices=[
                            ("individual", "دفعة فردية"),
                            ("batch", "دفعة جماعية"),
                            ("advance", "سلفة على الراتب"),
                            ("bonus", "مكافأة إضافية"),
                        ],
                        default="individual",
                        max_length=20,
                        verbose_name="نوع الدفعة",
                    ),
                ),
                (
                    "payment_method",
                    models.CharField(
                        help_text="رمز الحساب المحاسبي (مثل 10100 للخزنة، 10200 للبنك)",
                        max_length=50,
                        verbose_name="طريقة الدفع (account code)",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "في الانتظار"),
                            ("processing", "قيد المعالجة"),
                            ("completed", "مكتمل"),
                            ("failed", "فشل"),
                            ("cancelled", "ملغي"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="حالة الدفعة",
                    ),
                ),
                (
                    "total_amount",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="إجمالي مبلغ الدفعة",
                        max_digits=15,
                        verbose_name="إجمالي المبلغ",
                    ),
                ),
                (
                    "net_amount",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="المبلغ الصافي بعد الخصومات",
                        max_digits=15,
                        verbose_name="المبلغ الصافي",
                    ),
                ),
                (
                    "fees_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="رسوم التحويل أو المعالجة",
                        max_digits=10,
                        verbose_name="رسوم التحويل",
                    ),
                ),
                (
                    "payment_date",
                    models.DateField(
                        help_text="تاريخ تنفيذ الدفعة", verbose_name="تاريخ الدفع"
                    ),
                ),
                (
                    "due_date",
                    models.DateField(
                        blank=True,
                        help_text="تاريخ استحقاق الدفعة",
                        null=True,
                        verbose_name="تاريخ الاستحقاق",
                    ),
                ),
                (
                    "processed_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="وقت معالجة الدفعة",
                        null=True,
                        verbose_name="وقت المعالجة",
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True, help_text="وصف تفصيلي للدفعة", verbose_name="الوصف"
                    ),
                ),
                (
                    "bank_reference",
                    models.CharField(
                        blank=True,
                        help_text="رقم المرجع من البنك (للتحويلات البنكية)",
                        max_length=100,
                        verbose_name="مرجع البنك",
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="ملاحظات إضافية", verbose_name="ملاحظات"
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "دفعة الراتب",
                "verbose_name_plural": "دفعات الرواتب",
                "ordering": ["-payment_date", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PayrollPaymentLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "employee_name",
                    models.CharField(
                        help_text="اسم الموظف (للمرجعية السريعة)",
                        max_length=200,
                        verbose_name="اسم الموظف",
                    ),
                ),
                (
                    "gross_amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="المبلغ الإجمالي"
                    ),
                ),
                (
                    "net_amount",
                    models.DecimalField(
                        decimal_places=2, max_digits=10, verbose_name="المبلغ الصافي"
                    ),
                ),
                (
                    "deductions_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        max_digits=10,
                        verbose_name="مبلغ الخصومات",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
            ],
            options={
                "verbose_name": "سطر دفعة الراتب",
                "verbose_name_plural": "أسطر دفعات الرواتب",
            },
        ),
        migrations.CreateModel(
            name="PayrollPeriod",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "year",
                    models.IntegerField(
                        help_text="سنة فترة الرواتب", verbose_name="السنة"
                    ),
                ),
                (
                    "month",
                    models.IntegerField(
                        help_text="شهر فترة الرواتب (1-12)", verbose_name="الشهر"
                    ),
                ),
                (
                    "start_date",
                    models.DateField(
                        help_text="تاريخ بداية فترة الرواتب",
                        verbose_name="تاريخ البداية",
                    ),
                ),
                (
                    "end_date",
                    models.DateField(
                        help_text="تاريخ نهاية فترة الرواتب",
                        verbose_name="تاريخ النهاية",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "مسودة"),
                            ("calculated", "محسوبة"),
                            ("approved", "معتمدة"),
                            ("paid", "مدفوعة"),
                            ("closed", "مغلقة"),
                        ],
                        default="draft",
                        help_text="حالة فترة الرواتب",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "total_employees",
                    models.IntegerField(
                        default=0,
                        help_text="إجمالي عدد الموظفين في هذه الفترة",
                        verbose_name="عدد الموظفين",
                    ),
                ),
                (
                    "total_gross_salary",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="مجموع جميع الرواتب الإجمالية",
                        max_digits=15,
                        verbose_name="إجمالي الرواتب الإجمالية",
                    ),
                ),
                (
                    "total_net_salary",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="مجموع جميع الرواتب الصافية",
                        max_digits=15,
                        verbose_name="إجمالي الرواتب الصافية",
                    ),
                ),
                (
                    "total_deductions",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("0.00"),
                        help_text="مجموع جميع الخصومات",
                        max_digits=15,
                        verbose_name="إجمالي الخصومات",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
                (
                    "closed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الإغلاق"
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True,
                        help_text="ملاحظات إضافية حول فترة الرواتب",
                        verbose_name="ملاحظات",
                    ),
                ),
            ],
            options={
                "verbose_name": "فترة الرواتب",
                "verbose_name_plural": "فترات الرواتب",
                "ordering": ["-year", "-month"],
            },
        ),
        migrations.CreateModel(
            name="PermissionRequest",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("date", models.DateField(verbose_name="التاريخ")),
                ("start_time", models.TimeField(verbose_name="وقت البداية")),
                ("end_time", models.TimeField(verbose_name="وقت النهاية")),
                (
                    "duration_hours",
                    models.DecimalField(
                        decimal_places=2, max_digits=4, verbose_name="المدة بالساعات"
                    ),
                ),
                ("reason", models.TextField(verbose_name="السبب")),
                (
                    "is_emergency",
                    models.BooleanField(default=False, verbose_name="ظرف طارئ"),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "قيد الانتظار"),
                            ("approved", "معتمد"),
                            ("rejected", "مرفوض"),
                            ("cancelled", "ملغي"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="الحالة",
                    ),
                ),
                (
                    "requested_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="تاريخ الطلب"),
                ),
                (
                    "reviewed_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ المراجعة"
                    ),
                ),
                (
                    "review_notes",
                    models.TextField(blank=True, verbose_name="ملاحظات المراجعة"),
                ),
                (
                    "approved_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="تاريخ الاعتماد"
                    ),
                ),
            ],
            options={
                "verbose_name": "إذن",
                "verbose_name_plural": "الأذونات",
                "ordering": ["-requested_at"],
                "permissions": [
                    ("can_approve_permissions", "اعتماد الأذونات"),
                    ("can_view_all_permissions", "عرض جميع الأذونات"),
                ],
            },
        ),
        migrations.CreateModel(
            name="PermissionType",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name_ar",
                    models.CharField(max_length=100, verbose_name="اسم النوع (عربي)"),
                ),
                (
                    "name_en",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="اسم النوع (إنجليزي)"
                    ),
                ),
                (
                    "code",
                    models.CharField(max_length=20, unique=True, verbose_name="الكود"),
                ),
                (
                    "max_hours_per_request",
                    models.DecimalField(
                        decimal_places=2,
                        default=4.0,
                        max_digits=4,
                        verbose_name="الحد الأقصى للساعات في الطلب الواحد",
                    ),
                ),
                (
                    "requires_advance_request",
                    models.BooleanField(default=True, verbose_name="يتطلب طلب مسبق"),
                ),
                (
                    "advance_hours",
                    models.IntegerField(
                        default=24, verbose_name="عدد ساعات الطلب المسبق"
                    ),
                ),
                (
                    "affects_salary",
                    models.BooleanField(default=False, verbose_name="يؤثر على الراتب"),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
            ],
            options={
                "verbose_name": "نوع إذن",
                "verbose_name_plural": "أنواع الأذونات",
            },
        ),
        migrations.CreateModel(
            name="Shift",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("name", models.CharField(max_length=100, verbose_name="اسم الوردية")),
                (
                    "shift_type",
                    models.CharField(
                        choices=[
                            ("morning", "صباحية"),
                            ("evening", "مسائية"),
                            ("night", "ليلية"),
                            ("rotating", "متناوبة"),
                        ],
                        max_length=20,
                        verbose_name="نوع الوردية",
                    ),
                ),
                ("start_time", models.TimeField(verbose_name="وقت البداية")),
                ("end_time", models.TimeField(verbose_name="وقت النهاية")),
                (
                    "grace_period_in",
                    models.IntegerField(
                        default=15, verbose_name="فترة السماح للحضور (دقائق)"
                    ),
                ),
                (
                    "grace_period_out",
                    models.IntegerField(
                        default=15, verbose_name="فترة السماح للانصراف (دقائق)"
                    ),
                ),
                (
                    "work_hours",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        max_digits=4,
                        null=True,
                        verbose_name="ساعات العمل",
                    ),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
            ],
            options={
                "verbose_name": "وردية",
                "verbose_name_plural": "الورديات",
            },
        ),
        migrations.CreateModel(
            name="SalaryComponentTemplate",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("name", models.CharField(max_length=100, verbose_name="اسم البند")),
                (
                    "component_type",
                    models.CharField(
                        choices=[("earning", "مستحق"), ("deduction", "مستقطع")],
                        max_length=20,
                        verbose_name="نوع المكون",
                    ),
                ),
                (
                    "formula",
                    models.CharField(
                        blank=True,
                        help_text="مثال: basic * 0.25 (للنسبة المئوية) أو basic + 500 (لإضافة مبلغ ثابت)",
                        max_length=255,
                        verbose_name="الصيغة الحسابية",
                    ),
                ),
                (
                    "default_amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="يُستخدم إذا لم تكن هناك صيغة حسابية",
                        max_digits=10,
                        validators=[
                            django.core.validators.MinValueValidator(Decimal("0.00"))
                        ],
                        verbose_name="المبلغ الافتراضي",
                    ),
                ),
                ("description", models.TextField(blank=True, verbose_name="الوصف")),
                (
                    "default_account_code",
                    models.CharField(
                        blank=True,
                        help_text="الحساب المحاسبي الذي سيُستخدم عند تطبيق هذا القالب",
                        max_length=20,
                        verbose_name="رمز الحساب المحاسبي الافتراضي",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        help_text="كود فريد للقالب (مثل: UNION_FEE, MEDICAL_INS)",
                        max_length=50,
                        unique=True,
                        verbose_name="كود القالب",
                    ),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                ("order", models.IntegerField(default=0, verbose_name="الترتيب")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإنشاء"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
            ],
            options={
                "verbose_name": "قالب مكون راتب",
                "verbose_name_plural": "قوالب مكونات الرواتب",
                "ordering": ["component_type", "order", "name"],
                "indexes": [
                    models.Index(
                        fields=["component_type", "is_active"],
                        name="hr_salaryco_compone_827086_idx",
                    )
                ],
            },
        ),
        migrations.CreateModel(
            name="SalaryComponent",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "is_from_contract",
                    models.BooleanField(
                        default=False,
                        help_text="هل هذا البند منسوخ من بنود العقد الثابتة؟",
                        verbose_name="منسوخ من العقد",
                    ),
                ),
                (
                    "source",
                    models.CharField(
                        choices=[
                            ("contract", "من العقد"),
                            ("temporary", "مؤقت"),
                            ("personal", "شخصي"),
                            ("exceptional", "استثنائي"),
                            ("adjustment", "تعديل"),
                        ],
                        default="contract",
                        help_text="تصنيف البند حسب مصدره والغرض منه",
                        max_length=20,
                        verbose_name="مصدر البند",
                    ),
                ),
                (
                    "is_recurring",
                    models.BooleanField(
                        default=True,
                        help_text="هل يتكرر هذا البند كل شهر؟",
                        verbose_name="متكرر شهرياً",
                    ),
                ),
                (
                    "auto_renew",
                    models.BooleanField(
                        default=False,
                        help_text="هل يتم تجديد البند تلقائياً عند انتهاء صلاحيته؟",
                        verbose_name="تجديد تلقائي",
                    ),
                ),
                (
                    "renewal_period_months",
                    models.IntegerField(
                        blank=True,
                        help_text="عدد الشهور للتجديد التلقائي (اتركه فارغاً للتجديد اليدوي)",
                        null=True,
                        verbose_name="فترة التجديد (شهور)",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        help_text="مثل: BASIC, HOUSING, TRANSPORT",
                        max_length=50,
                        verbose_name="الكود",
                    ),
                ),
                (
                    "component_type",
                    models.CharField(
                        choices=[("earning", "مستحق"), ("deduction", "مستقطع")],
                        max_length=20,
                        verbose_name="نوع المكون",
                    ),
                ),
                ("name", models.CharField(max_length=100, verbose_name="بند الراتب")),
                (
                    "calculation_method",
                    models.CharField(
                        choices=[("fixed", "ثابت"), ("formula", "صيغة حسابية")],
                        default="fixed",
                        max_length=20,
                        verbose_name="طريقة الحساب",
                    ),
                ),
                (
                    "amount",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=10,
                        validators=[
                            django.core.validators.MinValueValidator(Decimal("0.00"))
                        ],
                        verbose_name="المبلغ الثابت",
                    ),
                ),
                (
                    "percentage",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="من الراتب الأساسي",
                        max_digits=5,
                        null=True,
                        verbose_name="النسبة المئوية",
                    ),
                ),
                (
                    "formula",
                    models.CharField(
                        blank=True,
                        help_text="مثال: BASIC * 0.1 + 500",
                        max_length=255,
                        verbose_name="الصيغة الحسابية",
                    ),
                ),
                (
                    "is_basic",
                    models.BooleanField(
                        default=False,
                        help_text="هل هذا هو الراتب الأساسي؟",
                        verbose_name="راتب أساسي",
                    ),
                ),
                (
                    "is_taxable",
                    models.BooleanField(default=True, verbose_name="خاضع للضريبة"),
                ),
                (
                    "is_fixed",
                    models.BooleanField(default=True, verbose_name="ثابت شهرياً"),
                ),
                (
                    "affects_overtime",
                    models.BooleanField(
                        default=False, verbose_name="يؤثر على حساب الإضافي"
                    ),
                ),
                ("order", models.IntegerField(default=0, verbose_name="الترتيب")),
                (
                    "show_in_payslip",
                    models.BooleanField(
                        default=True, verbose_name="يظهر في قسيمة الراتب"
                    ),
                ),
                (
                    "effective_from",
                    models.DateField(blank=True, null=True, verbose_name="ساري من"),
                ),
                (
                    "effective_to",
                    models.DateField(blank=True, null=True, verbose_name="ساري حتى"),
                ),
                ("is_active", models.BooleanField(default=True, verbose_name="نشط")),
                (
                    "account_code",
                    models.CharField(
                        blank=True,
                        help_text="رمز الحساب المحاسبي المرتبط بهذا البند (اختياري)",
                        max_length=20,
                        verbose_name="رمز الحساب المحاسبي",
                    ),
                ),
                ("notes", models.TextField(blank=True, verbose_name="ملاحظات")),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="تاريخ الإضافة"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="تاريخ التحديث"),
                ),
                (
                    "contract",
                    models.ForeignKey(
                        blank=True,
                        help_text="العقد الذي تم إضافة البند فيه (اختياري)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="employee_salary_components",
                        to="hr.contract",
                        verbose_name="العقد",
                    ),
                ),
                (
                    "employee",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="salary_components",
                        to="hr.employee",
                        verbose_name="الموظف",
                    ),
                ),
                (
                    "source_contract_component",
                    models.ForeignKey(
                        blank=True,
                        help_text="البند الأصلي في العقد (إن كان منسوخاً)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="copied_components",
                        to="hr.contractsalarycomponent",
                        verbose_name="بند العقد المصدر",
                    ),
                ),
                (
                    "template",
                    models.ForeignKey(
                        blank=True,
                        help_text="القالب المستخدم لإنشاء هذا البند (اختياري)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="instances",
                        to="hr.salarycomponenttemplate",
                        verbose_name="القالب",
                    ),
                ),
            ],
            options={
                "verbose_name": "مكون راتب",
                "verbose_name_plural": "مكونات الرواتب",
                "ordering": ["component_type", "order", "id"],
            },
        ),
    ]
