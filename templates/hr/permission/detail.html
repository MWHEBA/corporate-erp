{% extends 'base.html' %}
{% load static %}

{% block title %}تفاصيل الإذن{% endblock %}

{% block content %}
<div class="container-fluid">
  {% include "shared/page_header.html" %}

  <div class="row">
    <div class="col-md-8">
        <div class="section-container">
            <h5 class="mb-3"><i class="fas fa-info-circle me-2"></i>معلومات الإذن</h5>
            
            <table class="table table-bordered">
                <tr>
                    <th class="text-center" width="30%">الموظف</th>
                    <td class="text-center">{{ permission.employee.get_full_name_ar }}</td>
                </tr>
                <tr>
                    <th class="text-center">نوع الإذن</th>
                    <td class="text-center"><span class="badge bg-info">{{ permission.permission_type.name_ar }}</span></td>
                </tr>
                <tr>
                    <th class="text-center">التاريخ</th>
                    <td class="text-center">{{ permission.date|date:"Y-m-d" }}</td>
                </tr>
                <tr>
                    <th class="text-center">من - إلى</th>
                    <td class="text-center">{{ permission.start_time|time:"H:i" }} - {{ permission.end_time|time:"H:i" }}</td>
                </tr>
                <tr>
                    <th class="text-center">المدة</th>
                    <td class="text-center"><strong>{{ permission.duration_hours }}</strong> ساعة</td>
                </tr>
                <tr>
                    <th class="text-center">السبب</th>
                    <td class="text-center">{{ permission.reason }}</td>
                </tr>
                <tr>
                    <th class="text-center">ظرف طارئ</th>
                    <td class="text-center">
                        {% if permission.is_emergency %}
                            <span class="badge bg-warning">نعم</span>
                        {% else %}
                            <span class="badge bg-secondary">لا</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th class="text-center">الحالة</th>
                    <td class="text-center">
                        {% if permission.status == 'pending' %}
                            <span class="badge bg-warning text-dark">قيد الانتظار</span>
                        {% elif permission.status == 'approved' %}
                            <span class="badge bg-success">معتمد</span>
                        {% elif permission.status == 'rejected' %}
                            <span class="badge bg-danger">مرفوض</span>
                        {% elif permission.status == 'cancelled' %}
                            <span class="badge bg-secondary">ملغي</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th class="text-center">تاريخ الطلب</th>
                    <td class="text-center">{{ permission.requested_at|date:"Y-m-d H:i" }}</td>
                </tr>
                {% if permission.requested_by %}
                <tr>
                    <th class="text-center">طلبه</th>
                    <td class="text-center">{{ permission.requested_by.get_full_name }}</td>
                </tr>
                {% endif %}
                {% if permission.approved_by %}
                <tr>
                    <th class="text-center">اعتمده</th>
                    <td class="text-center">{{ permission.approved_by.get_full_name }} في {{ permission.approved_at|date:"Y-m-d H:i" }}</td>
                </tr>
                {% endif %}
                {% if permission.reviewed_by %}
                <tr>
                    <th class="text-center">راجعه</th>
                    <td class="text-center">{{ permission.reviewed_by.get_full_name }} في {{ permission.reviewed_at|date:"Y-m-d H:i" }}</td>
                </tr>
                {% endif %}
                {% if permission.review_notes %}
                <tr>
                    <th class="text-center">ملاحظات المراجعة</th>
                    <td class="text-center">{{ permission.review_notes }}</td>
                </tr>
                {% endif %}
            </table>
        </div>
    </div>
  </div>
</div>
{% endblock %}
